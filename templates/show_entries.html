{% extends "layout.html" %}
{% block body %}
<div class="container mb-5">
   <div class="row">
      <div class="col-md-6">
         <div class="container mt-5" style="width: 30rem;">
            <div class="card shadow-lg">
               <div class="card-body">
                  <form action="{{ url_for('add_entry') }}" method="post" class="add-entry">
                     <div class="mb-3">
                        <label for="updated_tit le" class="form-label">Title</label>
                        <input type="text" size="10" name="title" value="{{ old_title }}" class="form-control" required>
                     </div>
                     <div class="mb-3">
                        <label for="category" class="form-label">Category</label>
                        <input name="category" type="text" size="30" value="{{ old_category }}" class="form-control">
                     </div>
                     <div class="mb-3">
                        <label for="text" class="form-label">Text</label>
                        <textarea name="text" rows="5" cols="40" class="form-control" required>{{ old_text }}</textarea>
                     </div>
                     <button type="submit" class="btn btn-primary">Post!</button>
                  </form>
               </div>
            </div>
         </div>
      </div>
      <div class="col-md-6">
         <aside>
            <h1>Filter Category</h1>
            <form action="{{ url_for('show_selected') }}" method="post" name="selected-category">
               <select name="selected_category">
                  <option value="" selected>Category</option>
                  {% for category in categories %}
                  <option name="show_selected" value="{{ category }}">{{ category }}</option>
                  {% endfor %}
                  <option value="all" >All</option>
               </select>
               <button type="submit" class="btn btn-primary">Filter</button>
            </form>
         </aside>
      </div>

      <ul class="entries">
         {% for entry in entries %}
         <li>
            <div class="container text-center mb-4 ">
               <div class="row border round shadow-md">
                  <div class="col">
                     <span>{{ entry.title }}</span>
                  </div>
                  <div class="col">
                     <span>{{ entry.category }}</span>
                  </div>
                  <div class="col">
                     <span>{{ entry.text|safe }}</span>
                  </div>
                  <div>
                     <div class="d-flex md-2">
                        <form action="{{ url_for('delete_entry') }}" name="deleted_post" method="post">
                           <input type="hidden" name="deleted_post" value="{{ entry.id }}">
                           <button type="submit" class="btn btn-primary me-5">Delete Post</button>
                        </form>
                        <form action="{{ url_for('edit_entry') }}" name="updated_post" method="post">
                           <input type="hidden" name="old_title" value="{{ entry.title }}">
                           <input type="hidden" name="old_category" value="{{ entry.category }}">
                           <input type="hidden" name="old_text" value="{{ entry.text}}">
                           <input type="hidden" name="id" value="{{ entry.id}}">
                           <button type="submit" class="btn btn-primary margin-left">Edit Post</button>
                        </form>
                     </div>
                  </div>
               </div>
            </div>
         </li>
         {% else %}
         <li><em>Unbelievable. No entries here so far</em></li>
         {% endfor %}
      </ul>
   </div>
</div>
{% endblock %}